# 📊 Діаграма Flow SkillKlan Bot

## 🔄 Основний Flow

```
┌─────────────────┐
│   /start        │
│   (команда)     │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Привітання +   │
│  меню напрямків │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Запит імені    │
│  (автоматично)  │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Введення імені │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Запит номера   │
│  телефону       │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Надсилання     │
│  контакту       │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Меню вибору    │
│  напрямків      │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Вибір напрямку │
│  (QA/BA/Backend)│
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Інформація про │
│  напрямок       │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Кнопка "Отри-  │
│  мати завдання" │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Надсилання PDF │
│  з завданням    │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Кнопка "Готовий│
│  здати тестове" │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Підтвердження  │
│  + webhook      │
└─────────────────┘
```

## 🔀 Альтернативні шляхи

### Шлях 1: Вибір напрямку без реєстрації
```
┌─────────────────┐
│   /start        │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Натискання     │
│  напрямку       │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Інформація про │
│  напрямок       │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Запит відсутніх│
│  даних          │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Реєстрація     │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Меню вибору    │
│  напрямків      │
└─────────────────┘
```

### Шлях 2: Неправильний номер
```
┌─────────────────┐
│  Введення       │
│  неправильного  │
│  номера         │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Помилка        │
│  валідації      │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  Повторний      │
│  запит номера   │
└─────────────────┘
```

## 📊 Стани сесії

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   null      │◄──►│    name     │◄──►│   phone     │
│ (вільний)   │    │(очікування  │    │(очікування  │
│             │    │  імені)     │    │  номера)    │
└─────────────┘    └─────────────┘    └─────────────┘
       ▲                                    │
       │                                    ▼
       │                            ┌─────────────┐
       └────────────────────────────│ready_to_sub │
                                    │(очікування  │
                                    │підтвердження│
                                    │готовності)  │
                                    └─────────────┘
```

## 🎯 Ключові моменти

### ✅ Успішні сценарії:
1. **Повна реєстрація** → меню вибору → вибір напрямку → отримання завдання
2. **Часткова реєстрація** → доповнення даних → меню вибору
3. **Вибір напрямку без реєстрації** → запит даних → реєстрація → меню

### ⚠️ Обробка помилок:
1. **Неправильний номер** → повідомлення про помилку → повторний запит
2. **Відсутні дані** → запит відсутніх даних
3. **Зміна напрямку** → збереження попереднього напрямку

### 🔄 Особливості:
- **Завжди меню після реєстрації** - не показується кнопка "Отримати завдання" одразу
- **Одна кнопка готовності** - прибрано "Обрати напрям"
- **Гнучка реєстрація** - можна реєструватися в будь-який момент
- **Збереження часу** - всі події з timestamp 