# –î–µ—Ç–∞–ª—å–Ω–∏–π –≥—ñ–¥ –ø–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó In-App –º–µ–Ω—é –∑ –∫–Ω–æ–ø–∫–æ—é –¥–ª—è Telegram Web App

## –û–≥–ª—è–¥ –ø—Ä–æ–µ–∫—Ç—É

–¶–µ–π –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ–≥–æ in-app –º–µ–Ω—é –¥–ª—è Telegram –±–æ—Ç–∞ –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —ó–∂—ñ. –ü—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î PHP –¥–ª—è backend –ª–æ–≥—ñ–∫–∏ —Ç–∞ HTML/CSS/JavaScript –¥–ª—è frontend —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
durger-king/
‚îú‚îÄ‚îÄ src/                    # PHP backend –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ App.php            # –ì–æ–ª–æ–≤–Ω–∏–π –∫–ª–∞—Å –¥–æ–¥–∞—Ç–∫—É
‚îÇ   ‚îî‚îÄ‚îÄ Plugins/           # –ü–ª–∞–≥—ñ–Ω–∏ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∫–æ–º–∞–Ω–¥ —Ç–∞ web-–∑–∞–ø–∏—Ç—ñ–≤
‚îú‚îÄ‚îÄ public/                 # Frontend —Ñ–∞–π–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ index.php          # –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ demo.php           # –î–µ–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ css/               # –°—Ç–∏–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ js/                # JavaScript –ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ img/               # –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ –∞–Ω—ñ–º–∞—Ü—ñ—ó
‚îî‚îÄ‚îÄ service.php            # Webhook –æ–±—Ä–æ–±–Ω–∏–∫
```

## –ö–ª—é—á–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### 1. Telegram Web App Integration

#### –û—Å–Ω–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏:
- `public/index.php` - –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –º–µ–Ω—é
- `public/js/cafe.js` - –æ—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ Web App
- `public/css/cafe.css` - —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è

#### –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Web App:
```javascript
// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Telegram Web App
Telegram.WebApp.ready();

// –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ—ó –∫–Ω–æ–ø–∫–∏
Telegram.WebApp.MainButton.setParams({
    text_color: "#fff",
}).onClick(Cafe.mainBtnClicked);
```

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é

#### HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–≤–∞—Ä—É:
```html
<div class="cafe-item js-item" data-item-id="1" data-item-price="4990">
    <div class="cafe-item-counter js-item-counter">1</div>
    <div class="cafe-item-photo">
        <picture class="cafe-item-lottie js-item-lottie">
            <source type="application/x-tgsticker" srcset="./img/tgs/Burger.tgs">
            <img src="./img/Burger_148.png" alt="Burger">
        </picture>
    </div>
    <div class="cafe-item-label">
        <span class="cafe-item-title">Burger</span>
        <span class="cafe-item-price">$4.99</span>
    </div>
    <div class="cafe-item-buttons">
        <button class="cafe-item-decr-button js-item-decr-btn button-item ripple-handler">
            <span class="ripple-mask"><span class="ripple"></span></span>
        </button>
        <button class="cafe-item-incr-button js-item-incr-btn button-item ripple-handler">
            <span class="button-item-label">Add</span>
            <span class="ripple-mask"><span class="ripple"></span></span>
        </button>
    </div>
</div>
```

### 3. JavaScript –ª–æ–≥—ñ–∫–∞

#### –û—Å–Ω–æ–≤–Ω–∏–π –æ–±'—î–∫—Ç Cafe:
```javascript
var Cafe = {
    canPay: false,
    modeOrder: false,
    totalPrice: 0,
    
    init: function (options) {
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Web App
        Telegram.WebApp.ready();
        
        // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–æ–¥—ñ–π
        $(".js-item-incr-btn").on("click", Cafe.eIncrClicked);
        $(".js-item-decr-btn").on("click", Cafe.eDecrClicked);
        
        // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ—ó –∫–Ω–æ–ø–∫–∏
        Telegram.WebApp.MainButton.setParams({
            text_color: "#fff",
        }).onClick(Cafe.mainBtnClicked);
    }
};
```

#### –û–±—Ä–æ–±–∫–∞ –∫–ª—ñ–∫—ñ–≤ –ø–æ –∫–Ω–æ–ø–∫–∞—Ö:
```javascript
eIncrClicked: function (e) {
    e.preventDefault();
    var itemEl = $(this).parents(".js-item");
    Cafe.incrClicked(itemEl, 1);
},

eDecrClicked: function (e) {
    e.preventDefault();
    var itemEl = $(this).parents(".js-item");
    Cafe.incrClicked(itemEl, -1);
}
```

### 4. –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ –∞–Ω—ñ–º–∞—Ü—ñ—ó

#### CSS –∑–º—ñ–Ω–Ω—ñ –¥–ª—è —Ç–µ–º–∏:
```css
body {
    --default-font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    --block-bg-color: var(--tg-theme-bg-color);
    --accent-color: #31b545;
    --main-color: #f8a917;
    --text-color: #222;
}
```

#### –ê–Ω—ñ–º–∞—Ü—ñ—ó –¥–ª—è –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤:
```css
@keyframes badge-incr {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

@keyframes badge-decr {
    0% { transform: scale(1); }
    50% { transform: scale(0.8); }
    100% { transform: scale(1); }
}
```

### 5. Backend –æ–±—Ä–æ–±–∫–∞

#### PHP –ø–ª–∞–≥—ñ–Ω –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∑–∞–º–æ–≤–ª–µ–Ω—å:
```php
class WebService extends \TelegramBot\Plugin
{
    public function onWebAppData(WebAppData $webAppData): \Generator
    {
        if ($webAppData->getRawData()['method'] == "makeOrder") {
            // –û–±—Ä–æ–±–∫–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
            yield Request::sendMessage([
                'chat_id' => $webAppData->getUser()->getId(),
                'text' => "Your order has been placed successfully! üçü"
            ]);
        }
    }
}
```

## –ü–æ–∫—Ä–æ–∫–æ–≤–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ø—Ä–æ–µ–∫—Ç—É

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É
2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ Composer:
```bash
composer require telegram-bot-php/core
composer require utilities-php/routing
```

### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Telegram Bot

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –û—Ç—Ä–∏–º–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ webhook –Ω–∞ `https://your-domain.com/telegram`

### –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

1. –°—Ç–≤–æ—Ä—ñ—Ç—å `index.php` –∑ –±–∞–∑–æ–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é
2. –î–æ–¥–∞–π—Ç–µ –º–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤
3. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å Telegram Web App SDK:
```html
<script src="https://tg.dev/js/telegram-web-app.js"></script>
```

### –ö—Ä–æ–∫ 4: –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è JavaScript –ª–æ–≥—ñ–∫–∏

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –æ—Å–Ω–æ–≤–Ω–∏–π –æ–±'—î–∫—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–º
2. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é Web App
3. –î–æ–¥–∞–π—Ç–µ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
4. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ –ª–æ–≥—ñ–∫—É –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤ —Ç–∞ –∫–æ—à–∏–∫–∞

### –ö—Ä–æ–∫ 5: –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è

1. –°—Ç–≤–æ—Ä—ñ—Ç—å CSS —Ñ–∞–π–ª –∑ –±–∞–∑–æ–≤–∏–º–∏ —Å—Ç–∏–ª—è–º–∏
2. –î–æ–¥–∞–π—Ç–µ CSS –∑–º—ñ–Ω–Ω—ñ –¥–ª—è —Ç–µ–º–∏ Telegram
3. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω
4. –î–æ–¥–∞–π—Ç–µ –∞–Ω—ñ–º–∞—Ü—ñ—ó —Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏

### –ö—Ä–æ–∫ 6: Backend –ª–æ–≥—ñ–∫–∞

1. –°—Ç–≤–æ—Ä—ñ—Ç—å PHP –∫–ª–∞—Å –¥–ª—è –æ–±—Ä–æ–±–∫–∏ webhook'—ñ–≤
2. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ –æ–±—Ä–æ–±–∫—É –∑–∞–º–æ–≤–ª–µ–Ω—å
3. –î–æ–¥–∞–π—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –¥–∞–Ω–∏—Ö
4. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –≤—ñ–¥–ø—Ä–∞–≤–∫—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

## –ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### 1. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Telegram Web App

- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `Telegram.WebApp.ready()` –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ—ó –∫–Ω–æ–ø–∫–∏ —á–µ—Ä–µ–∑ `Telegram.WebApp.MainButton`
- –ê–¥–∞–ø—Ç–∞—Ü—ñ—è –¥–æ —Ç–µ–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —á–µ—Ä–µ–∑ CSS –∑–º—ñ–Ω–Ω—ñ

### 2. –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω

- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CSS Grid —Ç–∞ Flexbox
- –ê–¥–∞–ø—Ç–∞—Ü—ñ—è –¥–æ —Ä—ñ–∑–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤ –µ–∫—Ä–∞–Ω—É
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç–µ–º–Ω–æ—ó/—Å–≤—ñ—Ç–ª–æ—ó —Ç–µ–º–∏

### 3. –ê–Ω—ñ–º–∞—Ü—ñ—ó —Ç–∞ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

- Ripple –µ—Ñ–µ–∫—Ç–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
- –ê–Ω—ñ–º–∞—Ü—ñ—ó –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤ —Ç–æ–≤–∞—Ä—ñ–≤
- –ü–ª–∞–≤–Ω—ñ –ø–µ—Ä–µ—Ö–æ–¥–∏ –º—ñ–∂ —Å—Ç–∞–Ω–∞–º–∏

### 4. –ë–µ–∑–ø–µ–∫–∞

- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –Ω–∞ backend
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ Telegram
- –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ XSS –∞—Ç–∞–∫

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä—É:

1. –î–æ–¥–∞–π—Ç–µ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ `index.php`
2. –û–Ω–æ–≤—ñ—Ç—å –º–∞—Å–∏–≤ `store_items` –≤ `WebService.php`
3. –î–æ–¥–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ `img/` –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é

### –ó–º—ñ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –∫–Ω–æ–ø–æ–∫:

1. –ú–æ–¥–∏—Ñ—ñ–∫—É–π—Ç–µ JavaScript –æ–±—Ä–æ–±–Ω–∏–∫–∏ –≤ `cafe.js`
2. –û–Ω–æ–≤—ñ—Ç—å CSS —Å—Ç–∏–ª—ñ –≤ `cafe.css`
3. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –º–µ—Ç–æ–¥—ñ–≤ API:

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π case –≤ `onWebAppData` –º–µ—Ç–æ–¥—ñ
2. –î–æ–¥–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –ª–æ–≥—ñ–∫—É –æ–±—Ä–æ–±–∫–∏
3. –û–Ω–æ–≤—ñ—Ç—å frontend –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ API

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

### –õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ ngrok –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç—É–Ω–µ–ª—é
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ webhook –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É –∞–¥—Ä–µ—Å—É
3. –¢–µ—Å—Ç—É–π—Ç–µ —á–µ—Ä–µ–∑ @BotFather

### –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è:

1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `console.log()` –¥–ª—è JavaScript
2. –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ª–æ–≥–∏ PHP –ø–æ–º–∏–ª–æ–∫
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Telegram Web App Inspector

## –í–∏—Å–Ω–æ–≤–æ–∫

–¶–µ–π –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é in-app –º–µ–Ω—é –¥–ª—è Telegram –±–æ—Ç–∞ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Å—É—á–∞—Å–Ω–∏—Ö –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π. –ö–ª—é—á–æ–≤—ñ –∞—Å–ø–µ–∫—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç—å:

- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ Telegram Web App API
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω —Ç–∞ –∞–Ω—ñ–º–∞—Ü—ñ—ó
- –ë–µ–∑–ø–µ—á–Ω—É –æ–±—Ä–æ–±–∫—É –∑–∞–º–æ–≤–ª–µ–Ω—å
- –ú–æ–¥—É–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –∫–æ–¥—É

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ü–µ–π –≥—ñ–¥, –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–µ in-app –º–µ–Ω—é –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ Telegram –±–æ—Ç–∞, –∞–¥–∞–ø—Ç—É–≤–∞–≤—à–∏ –∫–æ–¥ –ø—ñ–¥ –≤–∞—à—ñ –ø–æ—Ç—Ä–µ–±–∏.
