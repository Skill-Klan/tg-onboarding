# üîê –ë–µ–∑–ø–µ–∫–∞ —Ç–æ–∫–µ–Ω–∞ - DRY Implementation

## üéØ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### 1. **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è** (`src/config/environment.js`)
- ‚úÖ **Singleton pattern** - –æ–¥–Ω–∞ —Ç–æ—á–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- ‚úÖ **–í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É
- ‚úÖ **–ú–∞—Å–∫—É–≤–∞–Ω–Ω—è** - –±–µ–∑–ø–µ—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞
- ‚úÖ **Type safety** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—ñ–≤ —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—É

### 2. **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** (`src/config/errorHandler.js`)
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞** - DRY –ø—Ä–∏–Ω—Ü–∏–ø
- ‚úÖ **Retry –º–µ—Ö–∞–Ω—ñ–∑–º** - –∞–≤—Ç–æ–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
- ‚úÖ **Graceful shutdown** - –∫–æ—Ä–µ–∫—Ç–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è** - –∑—Ä–æ–∑—É–º—ñ–ª—ñ –ø–æ–º–∏–ª–∫–∏

### 3. **–ó–∞—Ö–∏—â–µ–Ω–∏–π –∑–∞–ø—É—Å–∫** (`src/index.mjs`)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
- ‚úÖ **Webhook + Polling** –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
- ‚úÖ **Environment-based** –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
npm run setup

# 2. –î–æ–¥–∞–π —Ç–æ–∫–µ–Ω –≤ .env —Ñ–∞–π–ª
nano .env

# 3. –ü–µ—Ä–µ–≤—ñ—Ä –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
npm run validate

# 4. –ü–µ—Ä–µ–≤—ñ—Ä —Ç–æ–∫–µ–Ω (–º–∞—Å–∫–æ–≤–∞–Ω–∏–π)
npm run check-token

# 5. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞
npm run dev
```

## üîí –ë–µ–∑–ø–µ–∫–∞ —É —Ä—ñ–∑–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö

### –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞
```env
NODE_ENV=development
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
LOG_LEVEL=debug
```

### GitHub Actions
```yaml
env:
  BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
  NODE_ENV: production
```

### Docker
```bash
docker run -e BOT_TOKEN="$BOT_TOKEN" -e NODE_ENV="production" bot
```

### Heroku/Railway
```bash
heroku config:set BOT_TOKEN="your_token"
railway variables set BOT_TOKEN="your_token"
```

## üõ°Ô∏è –§—É–Ω–∫—Ü—ñ—ó –±–µ–∑–ø–µ–∫–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ç–æ–∫–µ–Ω–∞
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ–æ—Ä–º–∞—Ç—É (regex)
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ–≤–∂–∏–Ω–∏ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

### –ë–µ–∑–ø–µ—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
```javascript
// ‚ùå –ù–ï–ë–ï–ó–ü–ï–ß–ù–û
console.log('Token:', process.env.BOT_TOKEN);

// ‚úÖ –ë–ï–ó–ü–ï–ß–ù–û
console.log('Token:', config.bot.maskedToken);
// –í–∏–≤–µ–¥–µ: Token: 1234567890:****************...wxyz
```

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- 401 - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω
- 404 - –ë–æ—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π  
- Network errors - –ü—Ä–æ–±–ª–µ–º–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è
- Startup errors - –ü–æ–º–∏–ª–∫–∏ –∑–∞–ø—É—Å–∫—É

## üìã –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏

```bash
# –†–æ–∑—Ä–æ–±–∫–∞
npm run dev          # –ó–∞–ø—É—Å–∫ –∑ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
npm run validate     # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
npm run check-token  # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞

# –ü—Ä–æ–¥–∞–∫—à–Ω  
npm start           # –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º—ñ

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
npm run setup       # –°—Ç–≤–æ—Ä–∏—Ç–∏ .env –∑ –ø—Ä–∏–∫–ª–∞–¥—É
```

## üîÑ DRY –ø—Ä–∏–Ω—Ü–∏–ø–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ

1. **–Ñ–¥–∏–Ω–∞ —Ç–æ—á–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó** - –≤—Å–µ –≤ `environment.js`
2. **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è** - TokenManager class
3. **–£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** - ErrorHandler classes
4. **–ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è** - Singleton patterns
5. **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞–º** - environment-based

## üö® –í–∞–∂–ª–∏–≤—ñ –ø—Ä–∞–≤–∏–ª–∞

1. **–ù–Ü–ö–û–õ–ò** –Ω–µ –∫–æ–º—ñ—Ç—å—Ç–µ .env –≤ Git
2. **–ó–ê–í–ñ–î–ò** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –º–∞—Å–∫–æ–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥ –¥–ª—è –ª–æ–≥—ñ–≤
3. **–ü–ï–†–ï–í–Ü–†–Ø–ô–¢–ï** —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
4. **–í–ò–ö–û–†–ò–°–¢–û–í–£–ô–¢–ï** –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ
5. **–ù–ê–õ–ê–®–¢–û–í–£–ô–¢–ï** —Ä—ñ–∑–Ω—ñ —Ä—ñ–≤–Ω—ñ –ª–æ–≥—É–≤–∞–Ω–Ω—è

–¶—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –±–µ–∑–ø–µ–∫—É –ø—Ä–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–º—É –¥—É–±–ª—é–≤–∞–Ω–Ω—ñ –∫–æ–¥—É! üéØ
