# üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ –¥–µ–ø–ª–æ—é

## üéØ –ú–µ—Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è —â–æ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –≤ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ.

## üöÄ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è GitHub Actions

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –≤—Å—ñ —Å–µ–∫—Ä–µ—Ç–∏ –¥–æ–¥–∞–Ω—ñ –≤ GitHub
# BOT_TOKEN, HOST, USERNAME, SSH_PRIVATE_KEY
```

### 2. –¢–µ—Å—Ç–æ–≤–∏–π –¥–µ–ø–ª–æ–π

```bash
# –ó—Ä–æ–±—ñ—Ç—å –Ω–µ–≤–µ–ª–∏–∫—É –∑–º—ñ–Ω—É –≤ –∫–æ–¥—ñ
echo "# Test deployment $(date)" >> README.md

# Commit —Ç–∞ push
git add README.md
git commit -m "test: testing deployment workflow"
git push origin main
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Actions** –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
2. –ó–Ω–∞–π–¥—ñ—Ç—å workflow "üöÄ Auto Deploy Bot to Server"
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –≤—Å—ñ –∫—Ä–æ–∫–∏ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ:
   - ‚úÖ Test & Validate
   - ‚úÖ Deploy to Server
   - ‚úÖ Health Check

## üñ•Ô∏è –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
export BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞"
export DEPLOY_HOST="localhost"  # –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
export DEPLOY_USER="$USER"
export DEPLOY_PATH="/home/$USER/apps/tg-onboarding"
```

### 2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
./deploy.sh status

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
./deploy.sh logs

# –¢–µ—Å—Ç–æ–≤–∏–π –¥–µ–ø–ª–æ–π
./deploy.sh deploy
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —â–æ –ø—Ä–æ—Ü–µ—Å –∑–∞–ø—É—â–µ–Ω–∏–π
ps aux | grep "node.*index.mjs"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤
tail -f /home/$USER/apps/tg-onboarding/bot.log

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ä—Ç—ñ–≤
netstat -tlnp | grep :3000
```

## üîß –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π —Å–µ—Ä–≤–µ—Ä –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —ñ—Å–Ω—É—é—á–∏–π
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Node.js, Git, –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ SSH
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö

```bash
export DEPLOY_HOST="ip_—Ç–µ—Å—Ç–æ–≤–æ–≥–æ_—Å–µ—Ä–≤–µ—Ä–∞"
export DEPLOY_USER="–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á_–Ω–∞_—Å–µ—Ä–≤–µ—Ä—ñ"
export DEPLOY_PATH="/home/–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á/apps/tg-onboarding-test"
```

### 3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–¥–∞–ª–µ–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é

```bash
# –¢–µ—Å—Ç SSH –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
ssh $DEPLOY_USER@$DEPLOY_HOST "echo 'SSH OK'"

# –¢–µ—Å—Ç –¥–µ–ø–ª–æ—é
./deploy.sh deploy

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
./deploy.sh status
```

## üìä –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —è–∫–æ—Å—Ç—ñ –¥–µ–ø–ª–æ—é

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–∞–π–ª—ñ–≤

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é
cd $DEPLOY_PATH

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —â–æ –∫–æ–¥ –æ–Ω–æ–≤–ª–µ–Ω–æ
git log --oneline -5

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
cd tg_bot
npm list --depth=0

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ .env —Ñ–∞–π–ª—É
cat .env
```

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—É

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —â–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω–∏–π
ps aux | grep "node.*index.mjs"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤
tail -20 bot.log

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —â–æ –±–æ—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î
curl http://localhost:3000/health  # —è–∫—â–æ —î health endpoint
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ

```bash
# –í—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É –±–æ—Ç—É –≤ Telegram
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –≤—ñ–Ω –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
tail -f bot.log
```

## üö® –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫

### 1. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–µ–≤—ñ—Ä–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–µ–≤—ñ—Ä–Ω–∏–π —Ç–æ–∫–µ–Ω
export BOT_TOKEN="wrong_token"

# –°–ø—Ä–æ–±—É–π—Ç–µ –¥–µ–ø–ª–æ–π
./deploy.sh deploy

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –æ—Ç—Ä–∏–º–∞–ª–∏ –ø–æ–º–∏–ª–∫—É
```

### 2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–µ–≤—ñ—Ä–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–µ–≤—ñ—Ä–Ω–∏–π —Ö–æ—Å—Ç
export DEPLOY_HOST="999.999.999.999"

# –°–ø—Ä–æ–±—É–π—Ç–µ –¥–µ–ø–ª–æ–π
./deploy.sh deploy

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –æ—Ç—Ä–∏–º–∞–ª–∏ –ø–æ–º–∏–ª–∫—É SSH
```

### 3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–µ–≤—ñ—Ä–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–µ–≤—ñ—Ä–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
export DEPLOY_USER="nonexistent_user"

# –°–ø—Ä–æ–±—É–π—Ç–µ –¥–µ–ø–ª–æ–π
./deploy.sh deploy

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –æ—Ç—Ä–∏–º–∞–ª–∏ –ø–æ–º–∏–ª–∫—É –¥–æ—Å—Ç—É–ø—É
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### GitHub Actions
- [ ] Workflow –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ push
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å–ø—ñ—à–Ω–æ
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å–ø—ñ—à–Ω–æ
- [ ] Health check –ø–æ–∫–∞–∑—É—î —â–æ –±–æ—Ç –ø—Ä–∞—Ü—é—î
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—É—é—Ç—å —É—Å–ø—ñ—à–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è

### –õ–æ–∫–∞–ª—å–Ω–∏–π –¥–µ–ø–ª–æ–π
- [ ] –°–∫—Ä–∏–ø—Ç deploy.sh –ø—Ä–∞—Ü—é—î
- [ ] –ö–æ–º–∞–Ω–¥–∏ status —Ç–∞ logs –ø—Ä–∞—Ü—é—é—Ç—å
- [ ] –õ–æ–∫–∞–ª—å–Ω–∏–π –¥–µ–ø–ª–æ–π —Å—Ç–≤–æ—Ä—é—î –ø—Ä–æ—Ü–µ—Å
- [ ] –ë–æ—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ –∫–æ–º–∞–Ω–¥–∏

### –í—ñ–¥–¥–∞–ª–µ–Ω–∏–π –¥–µ–ø–ª–æ–π
- [ ] SSH –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î
- [ ] –ö–æ–¥ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
- [ ] –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è
- [ ] –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
- [ ] –õ–æ–≥–∏ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- [ ] –ù–µ–≤—ñ—Ä–Ω–∏–π —Ç–æ–∫–µ–Ω –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è
- [ ] –ù–µ–≤—ñ—Ä–Ω–∏–π —Ö–æ—Å—Ç –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è
- [ ] –ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è
- [ ] –ü–æ–º–∏–ª–∫–∏ –ª–æ–≥—É—é—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ

## üéâ –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

1. **–ó—Ä–æ–±—ñ—Ç—å commit –≤—Å—ñ—Ö –∑–º—ñ–Ω**
2. **Push –≤ main –≥—ñ–ª–∫—É**
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ GitHub Actions –∑–∞–ø—É—Å—Ç–∏–≤—Å—è**
4. **–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –¥–µ–ø–ª–æ–π –ø—Ä–æ–π—à–æ–≤ —É—Å–ø—ñ—à–Ω–æ**
5. **–ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram**

---

üß™ **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!** –°–∏—Å—Ç–µ–º–∞ –¥–µ–ø–ª–æ—é –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ.
