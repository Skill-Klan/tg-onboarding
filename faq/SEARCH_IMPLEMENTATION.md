# Реалізація динамічного пошуку для FAQ

## Огляд

Реалізовано динамічний пошук згідно з технічним завданням. Система забезпечує миттєву фільтрацію пунктів FAQ під час введення тексту з debounce 200мс.

## Архітектура

### Модулі

#### 1. `searchEngine.js`
**Призначення:** Побудова індексу, нормалізація та пошук
**Основні методи:**
- `buildIndex(data)` - побудова плоского індексу з нормалізованими полями
- `normalize(str)` - нормалізація рядків (нижній регістр, видалення діакритиків)
- `match(query)` - пошук по індексу з поверненням множини questionId
- `getFilteredData(query)` - отримання фільтрованих даних для рендерингу

#### 2. `searchController.js`
**Призначення:** Керування пошуком, debounce та відновлення стану
**Основні методи:**
- `handleSearchInput(query)` - обробка введення з debounce
- `performSearch(query)` - виконання пошуку
- `saveExpandedState()` - збереження стану розкриття
- `restoreExpandedState()` - відновлення збереженого стану
- `clearSearch()` - очищення пошуку та відновлення оригінального стану

### Інтеграція

Система інтегрована в існуючий `app.js` та `searchComponent.js`:
- `SearchEngine` та `SearchController` ініціалізуються в `FAQApp`
- `SearchComponent` делегує пошук до `SearchController`
- Збереження та відновлення стану через `FAQApp.currentState`

## Функціональність

### 1. Пошук та фільтрація
- **Об'єкт пошуку:** назви питань (завжди), відповіді (опціонально), категорії
- **Правила відповідності:**
  - Порівняння без урахування регістру
  - Нормалізація діакритиків/акцентів
  - Пошук за підрядком (substring match)
  - Колапс множинних пробілів

### 2. Користувацька взаємодія
- **Тригер:** подія `input` на полі пошуку
- **Debounce:** 200мс для оптимізації продуктивності
- **Автоматичне розкриття:** категорії з відповідниками автоматично відкриваються
- **Очищення:** ESC або кнопка очищення

### 3. Візуальна поведінка
- **Фільтрація:** питання, що не збіглися, не рендеряться
- **Категорії:** показуються лише якщо містять відповідні питання
- **Повідомлення:** "Нічого не знайдено" при відсутності збігів
- **Статистика:** показ кількості знайдених категорій та питань

### 4. Відновлення стану
- **Збереження:** стан розкриття категорій/питань перед пошуком
- **Відновлення:** повне відновлення попереднього стану після очищення
- **Безпека:** перевірка існування компонентів перед відновленням

## Конфігурація

### Параметр `SEARCH_IN_ANSWERS`
```javascript
// В searchEngine.js
this.config = {
    SEARCH_IN_ANSWERS: false // Технічний перемикач
};
```

**Значення:**
- `false` (за замовчуванням): пошук тільки в питаннях та категоріях
- `true`: пошук також в відповідях

**Примітка:** Зміна цього параметра не впливає на поведінку за замовчуванням.

## Продуктивність

### Індексація
- **Час:** O(N) при завантаженні сторінки
- **Пам'ять:** плоский індекс з нормалізованими полями
- **Оновлення:** автоматичне при зміні даних

### Пошук
- **Алгоритм:** лінійний пошук по індексу
- **Швидкість:** оптимально для наборів до 1000+ питань
- **Debounce:** запобігає зайвим перерендерам

## Використання

### Базовий пошук
```javascript
// Автоматично при введенні в поле пошуку
// Debounce 200мс, фільтрація в реальному часі
```

### Програмний пошук
```javascript
// Через SearchController
const results = searchController.searchEngine.getFilteredData('запит');
```

### Конфігурація
```javascript
// Зміна параметрів пошуку
searchController.searchEngine.updateConfig({
    SEARCH_IN_ANSWERS: true
});
```

## Тестування

Детальні тест-кейси доступні в `TEST_CASES.md`:
1. Базовий пошук без фільтрації
2. Пошук за підрядком
3. Пошук без урахування регістру та діакритиків
4. Пошук без збігів
5. Відновлення стану після очищення
6. Debounce при швидкому введенні

## Залежності

- **Браузер:** підтримка ES6+ (normalize, Set, arrow functions)
- **DOM:** стандартні методи браузера
- **Сторонні бібліотеки:** відсутні

## Розширення

### Додавання нових полів пошуку
```javascript
// В searchEngine.js, метод buildIndex
const indexItem = {
    // ... існуючі поля
    newField: this.normalize(data.newField)
};
```

### Кастомні правила пошуку
```javascript
// В searchEngine.js, метод match
// Додати логіку для нових типів пошуку
```

### Додаткові фільтри
```javascript
// В searchController.js, метод performSearch
// Додати додаткову логіку фільтрації
```
